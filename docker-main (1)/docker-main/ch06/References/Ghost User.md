
---

# 👻 리눅스에서의 고스트 유저(Ghost User): 보안과 운영 관점의 심층 해설

리눅스와 유닉스 시스템을 운영하다 보면 **UID(User ID)만 존재하고 사용자 이름이 없는 계정**을 접할 때가 있다. 이를 흔히 **고스트 유저(Ghost User)** 라 부른다. 이번 글에서는 고스트 유저의 정체와 생성 배경, 운영·보안 측면에서의 의미를 전문가 시각에서 해부해 본다.

---

## 1. 🧐 고스트 유저란 무엇인가?

리눅스는 파일 소유권과 권한을 **사용자 이름(user name)** 이 아니라 **UID/GID** 로 관리한다.
`/etc/passwd` 파일은 단지 이 UID를 이름과 매핑해주는 역할만 할 뿐이다.

따라서,

* UID=2000인 사용자가 없더라도
* 파일 소유권을 `chown 2000:2000`으로 바꾸면

시스템은 이를 "UID=2000 소유"라고만 인식한다.

```bash
$ sudo chown 2000:2000 report.txt
$ ls -l
-rw-r--r-- 1 2000 2000  1024 Sep 18 10:00 report.txt
```

이 상태를 **고스트 유저 상태**라고 한다.

---

## 2. 🔍 커널 관점에서 본 UID 관리

리눅스 커널은 **UID 값**만으로 권한을 판별한다.

* UID ↔ 이름 매핑 실패 → 숫자로만 표시
* 커널 입장에서는 전혀 문제 없음

즉, 이름이 없다고 해서 시스템 권한 제어가 망가지는 것은 아니며, 단지 **사람이 보기 불편**할 뿐이다.

---

## 3. ⚡ 고스트 유저가 생기는 주요 시나리오

| 시나리오             | 설명                                            |
| ---------------- | --------------------------------------------- |
| **UID 직접 지정**    | `chown 2000:2000 file` 실행 시 사용자 계정 없이 UID만 존재 |
| **서버 마이그레이션**    | 옛 서버에서 파일만 옮기고 계정 매핑이 안 된 경우                  |
| **NFS·NAS 환경**   | UID/GID 불일치 → 사용자명 미표시 현상                     |
| **컨테이너(Docker)** | 컨테이너와 호스트 간 UID 관리가 분리될 때 발생                  |
| **보안 격리 목적**     | 의도적으로 UID만 주어 로그인 계정을 없애는 방식                  |

---

## 4. 🧠 고스트 유저의 특징

* **로그인 불가**: 계정이 없으므로 쉘·패스워드 정보 없음
* **소유권만 존재**: UID/GID 기준으로 권한만 남음
* **보안적 활용 가능**: 로그인 경로 자체가 없어 공격면 감소

---

## 5. 🔐 보안 관점에서 본 고스트 유저

### ✅ 장점

* **공격 표면 축소**: UID만 존재, SSH·콘솔 로그인 경로 없음
* **프로세스 격리**: 민감한 프로세스를 특정 UID로만 실행

### ⚠️ 단점

* **관리성 저하**: 숫자만 남으면 누가 소유자인지 파악 어려움
* **마이그레이션 충돌**: 새 서버에서 UID 중복 가능성 존재

---

## 6. 🛠️ 실무 활용 예시

### 6.1 컨테이너 환경

컨테이너 내부에서 **비루트 사용자**를 UID만 지정해 실행:

```bash
docker run -u 2000:2000 myapp
```

* 로그인 계정 없음 → 불필요한 로그인 공격 차단
* 프로세스는 UID=2000 권한만 가짐

---

### 6.2 NFS 환경

* NFS 서버 ↔ 클라이언트 간 UID 불일치 → 고스트 UID 발생
* 해결책: **LDAP, SSSD** 등 중앙 인증 시스템으로 UID 통합

---

## 7. 📝 UID와 계정 재매핑

고스트 UID에 계정을 나중에 생성하면 자동 연결된다:

```bash
sudo useradd -u 2000 appuser
```

→ UID=2000 소유 파일이 자동으로 `appuser` 소유로 표시됨

---

## 8. 🚀 결론

고스트 유저는 **의도하지 않게 발생**할 수도, **보안 목적으로 의도적으로 활용**될 수도 있다.
컨테이너·NFS·클라우드 환경에서는 특히 UID 관리 체계가 중요하며, 필요 시 **중앙 UID 관리 시스템**을 도입하는 것이 바람직하다.

