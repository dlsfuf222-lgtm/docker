

# ğŸ› ï¸ Supervisord: í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ì˜ ë¹„ë°€ ë³‘ê¸°

`supervisord`ëŠ” **Python ê¸°ë°˜ì˜ í”„ë¡œì„¸ìŠ¤ ì œì–´ ì‹œìŠ¤í…œ(Process Control System)** ìœ¼ë¡œ, ë¦¬ëˆ…ìŠ¤/ìœ ë‹‰ìŠ¤ í™˜ê²½ì—ì„œ ì—¬ëŸ¬ ê°œì˜ ì¥ê¸° ì‹¤í–‰ í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ëª¨ë‹ˆí„°ë§í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤.
íŠ¹íˆ **Docker**, **ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤**, **ë°±ê·¸ë¼ìš´ë“œ ë°ëª¬ ê´€ë¦¬** ê°™ì€ í™˜ê²½ì—ì„œ ë§ì´ ì“°ì…ë‹ˆë‹¤.

---

## 1. Supervisordì˜ í•µì‹¬ ê°œë…

| íŠ¹ì§•        | ì„¤ëª…                                            |
| --------- | --------------------------------------------- |
| **ê¸°ëŠ¥**    | ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹œì‘, ì¤‘ì§€, ì¬ì‹œì‘, ëª¨ë‹ˆí„°ë§, ìë™ ì¬ì‹œì‘            |
| **ì–¸ì–´**    | Python ê¸°ë°˜, í¬ë¡œìŠ¤ í”Œë«í¼ ì§€ì›                         |
| **ì‹¤í–‰ ë°©ì‹** | ë‹¨ì¼ ë§ˆìŠ¤í„° í”„ë¡œì„¸ìŠ¤(`supervisord`) + ì—¬ëŸ¬ ìì‹ í”„ë¡œì„¸ìŠ¤       |
| **êµ¬ì„± íŒŒì¼** | `/etc/supervisord.conf` ë˜ëŠ” `supervisord.conf` |
| **CLI íˆ´** | `supervisorctl` ëª…ë ¹ì–´ë¡œ í”„ë¡œì„¸ìŠ¤ ì œì–´                  |
| **ìë™ ë³µêµ¬** | í”„ë¡œì„¸ìŠ¤ ë¹„ì •ìƒ ì¢…ë£Œ ì‹œ ìë™ ì¬ì‹œì‘ ì§€ì›                       |

---

## 2. Supervisordì˜ ì•„í‚¤í…ì²˜

```text
+---------------------+
|     supervisord      |  â† Master í”„ë¡œì„¸ìŠ¤ (Python ê¸°ë°˜)
+---------------------+
          |
   -----------------
   |       |       |
   v       v       v
í”„ë¡œì„¸ìŠ¤1  í”„ë¡œì„¸ìŠ¤2  í”„ë¡œì„¸ìŠ¤3  â† ìì‹ í”„ë¡œì„¸ìŠ¤ë“¤
```

* **supervisord**: ì„¤ì • íŒŒì¼ì„ ì½ê³ , ì§€ì •ëœ ëª¨ë“  ìì‹ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰ ë° ê´€ë¦¬.
* **supervisorctl**: CLI ì¸í„°í˜ì´ìŠ¤. ì‹œì‘/ì¤‘ì§€/ì¬ì‹œì‘ ëª…ë ¹ì„ ë§ˆìŠ¤í„°ì—ê²Œ ì „ë‹¬.
* **Web UI (ì˜µì…˜)**: ì„¤ì •ì— ë”°ë¼ ì›¹ ëŒ€ì‹œë³´ë“œ í˜•íƒœë¡œ ê´€ë¦¬ ê°€ëŠ¥.

---

## 3. ê¸°ë³¸ ì‚¬ìš©ë²•

### ì„¤ì¹˜

```bash
# Ubuntu/Debian
sudo apt-get install supervisor

# CentOS/RHEL
sudo yum install supervisor

# Python ê¸°ë°˜ ì„¤ì¹˜
pip install supervisor
```

### ì‹¤í–‰

```bash
# supervisord ì‹¤í–‰ (ë°±ê·¸ë¼ìš´ë“œ)
supervisord -c /etc/supervisord.conf

# í”„ë¡œì„¸ìŠ¤ ì œì–´
supervisorctl start myapp
supervisorctl restart myapp
supervisorctl status
```

---

## 4. ì„¤ì • íŒŒì¼ ì˜ˆì‹œ (`supervisord.conf`)

```ini
[supervisord]
logfile=/var/log/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/var/log/supervisor

[program:myapp]
command=/usr/bin/python3 /opt/myapp/app.py
autostart=true
autorestart=true
stderr_logfile=/var/log/myapp.err.log
stdout_logfile=/var/log/myapp.out.log
```

### ì£¼ìš” ì˜µì…˜

| ì˜µì…˜               | ì„¤ëª…                        |
| ---------------- | ------------------------- |
| `command`        | ì‹¤í–‰í•  ëª…ë ¹ì–´                   |
| `autostart`      | supervisord ì‹œì‘ ì‹œ ìë™ ì‹¤í–‰ ì—¬ë¶€ |
| `autorestart`    | í”„ë¡œì„¸ìŠ¤ ì£½ì„ ì‹œ ìë™ ì¬ì‹œì‘ ì—¬ë¶€       |
| `stderr_logfile` | í‘œì¤€ ì—ëŸ¬ ë¡œê·¸ ê²½ë¡œ               |
| `stdout_logfile` | í‘œì¤€ ì¶œë ¥ ë¡œê·¸ ê²½ë¡œ               |

---

## 5. Docker í™˜ê²½ì—ì„œ Supervisord

Docker ì»¨í…Œì´ë„ˆ ì•ˆì—ì„œ **ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ë™ì‹œì— ì‹¤í–‰**í•´ì•¼ í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.
ì˜ˆ: `nginx` + `gunicorn`ì„ í•œ ì»¨í…Œì´ë„ˆì—ì„œ ëŒë¦´ ê²½ìš°.

```Dockerfile
FROM ubuntu:20.04
RUN apt-get update && apt-get install -y supervisor
COPY supervisord.conf /etc/supervisord.conf
CMD ["/usr/bin/supervisord", "-c", "/etc/supervisord.conf"]
```

---

## 6. Systemdì™€ì˜ ë¹„êµ

| ê¸°ëŠ¥/íŠ¹ì§•      | Supervisord    | Systemd          |
| ---------- | -------------- | ---------------- |
| ì„¤ì¹˜ ìš©ì´ì„±     | Python ê¸°ë°˜, ê°€ë³ë‹¤ | OSì— ë‚´ì¥ (ëŒ€ë¶€ë¶„ ë¦¬ëˆ…ìŠ¤) |
| í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬    | ë‹¤ì¤‘ í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ ê°•ì   | ë‹¨ì¼ ì„œë¹„ìŠ¤ ë‹¨ìœ„ ì¤‘ì‹¬     |
| ì¬ì‹œì‘ ì •ì±…     | ì§€ì›             | ì§€ì›               |
| ë¡œê¹…         | ìì²´ ë¡œê¹… ì§€ì›       | journalctl í†µí•©    |
| Docker ì¹œí™”ì„± | ë†’ìŒ             | ì¤‘ê°„ ì •ë„            |

---

## 7. ì‹¤ì „ í™œìš© ì‹œë‚˜ë¦¬ì˜¤

* **ì›¹ ì„œë²„**: Nginx + uWSGI + Celery ì¡°í•©ì„ í•œ ì„œë²„ì—ì„œ ê´€ë¦¬
* **ë°±ì—”ë“œ ì›Œì»¤**: ë¹„ë™ê¸° í(ì˜ˆ: Celery, RQ) ì‘ì—… ê´€ë¦¬
* **Docker**: ë‹¤ì¤‘ í”„ë¡œì„¸ìŠ¤ ì»¨í…Œì´ë„ˆ ê´€ë¦¬
* **DevOps**: ì¬ì‹œì‘ ìë™í™”, ë¡œê·¸ ê´€ë¦¬, ì¥ì•  ë³µêµ¬

---

## 8. í•œëˆˆì— ë³´ëŠ” ìš”ì•½

| í•­ëª©       | ì„¤ëª…                             |
| -------- | ------------------------------ |
| í•µì‹¬ ëª©ì     | í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰, ëª¨ë‹ˆí„°ë§, ìë™ ì¬ì‹œì‘          |
| êµ¬ì„± ìš”ì†Œ    | `supervisord`, `supervisorctl` |
| ì¥ì        | ê°„ë‹¨í•œ ì„¤ì •, ìë™ ë³µêµ¬, ì›¹ UI ì§€ì›         |
| ë‹¨ì        | OS native ì„œë¹„ìŠ¤ ê´€ë¦¬ì—ëŠ” Systemd ì„ í˜¸  |
| ì£¼ìš” ì‚¬ìš© ì‚¬ë¡€ | Docker, DevOps, ë°±ì—”ë“œ ì›Œì»¤ ê´€ë¦¬      |

---


