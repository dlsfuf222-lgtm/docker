리눅스와 같은 운영체제에서 \*\*블록(block)\*\*이라는 개념은 **저장장치에서 데이터를 읽고 쓰는 기본 단위**를 의미합니다. 디스크 I/O, 파일시스템 구조, 캐시 관리 등 거의 모든 스토리지 계층에서 핵심적으로 사용됩니다.


---

## 1. 블록(Block)의 정의

* **저장 장치의 최소 전송 단위**
  디스크·SSD·가상 블록 장치는 **섹터(sector)** 단위로 물리적 읽기·쓰기를 수행하지만, 운영체제와 파일시스템은 보통 **여러 섹터를 묶어** 더 큰 단위인 \*\*블록(block)\*\*으로 관리합니다.

* **데이터 관리·주소 지정 단위**
  파일시스템은 파일을 여러 블록에 나눠 저장하며, 블록 단위로 할당/해제·인덱싱·캐싱을 합니다.

---

## 2. 블록 vs 섹터 vs 페이지

| 용어             | 의미                     | 크기 예시           | 계층        |
| -------------- | ---------------------- | --------------- | --------- |
| **섹터**(Sector) | 물리 디스크의 최소 읽기·쓰기 단위    | 512B, 4KB       | 디스크 하드웨어  |
| **블록**(Block)  | 파일시스템이 데이터를 관리하는 논리 단위 | 1KB, 2KB, 4KB … | 파일시스템     |
| **페이지**(Page)  | 메모리·가상메모리 관리 단위        | 4KB, 8KB …      | OS 메모리 관리 |

예를 들어, ext4 파일시스템에서 \*\*블록 크기(block size)\*\*는 보통 **4KB**입니다. 즉, 4KB보다 작은 파일도 최소 4KB 블록 하나를 차지합니다.

---

## 3. 블록의 역할

1. **공간 할당 단위**: 파일이 1바이트만 있어도 블록 단위로 공간이 배정됨.
2. **I/O 효율성**: 너무 작은 단위로 읽고 쓰면 오버헤드 ↑ → 블록 단위로 묶어 성능 ↑
3. **인덱싱·캐싱 단위**: 커널의 버퍼 캐시(Buffer Cache), 페이지 캐시(Page Cache)도 블록 단위 사용.
4. **파일시스템 설계 단위**: 아이노드가 파일 → 블록 매핑 정보 관리.

---

## 4. 파일시스템 관점에서의 블록

* ext4 같은 리눅스 파일시스템은 디스크를 **슈퍼블록 → 블록 그룹 → 블록 비트맵/아이노드 테이블/데이터 블록**으로 조직합니다.
* **데이터 블록**: 파일 내용 저장
* **아이노드 블록**: 파일 메타데이터 저장
* **비트맵 블록**: 블록 할당 상태 관리(0=비어있음, 1=사용 중)

예:

```
[슈퍼블록] [블록그룹 디스크립터] [블록 비트맵] [아이노드 비트맵] [아이노드 테이블] [데이터 블록...]
```

---

## 5. 블록 크기 결정

* `mkfs.ext4` 같은 명령으로 파일시스템 생성 시 지정 가능:

  ```bash
  sudo mkfs.ext4 -b 4096 /dev/sda1  # 블록 크기 4KB
  ```
* 일반적으로 **4KB**가 표준: 성능·공간 효율 균형.

---

## 6. 블록 크기와 성능·공간 활용

* **큰 블록 크기**:

  * 장점: 순차 I/O 성능 ↑, 큰 파일에 효율적
  * 단점: 작은 파일이 많을 때 공간 낭비 ↑(내부 단편화)
* **작은 블록 크기**:

  * 장점: 작은 파일에 공간 절약
  * 단점: 인덱스 테이블 커지고 랜덤 I/O 성능 ↓

---

## 7. 관련 명령어

```bash
# 블록 크기 확인
sudo tune2fs -l /dev/sda1 | grep 'Block size'

# 블록 단위 사용량 보기
df -h       # 인간 친화적 용량 단위
df -B1      # 바이트 단위
df -B4096   # 4KB 블록 단위

# 파일이 실제 차지하는 블록 수 보기
ls -ls      # 블록 수와 파일명 표시
du -h file  # 디스크 사용량
```

---

## 8. 시각적 다이어그램

```
[하드웨어: 섹터(512B)] → [파일시스템: 블록(4KB)] → [파일: 여러 블록에 저장]
         ↑                        ↑
      디스크 계층            파일시스템 계층
```

예: 10KB 파일을 4KB 블록 크기에서 저장

* 블록1: 4KB
* 블록2: 4KB
* 블록3: 2KB(마지막 블록 일부만 사용)

---

## 9. 핵심 요약

* **블록**은 디스크에서 **파일시스템이 데이터를 관리하는 기본 단위**.
* 물리적으로는 **섹터** 기반이지만, 운영체제는 보통 **블록 단위**로 I/O 처리.
* 블록 크기는 **성능·공간 활용·워크로드 특성**에 따라 조정 가능.
* 관련 명령어: `tune2fs`, `ls -ls`, `du`, `df`, `mkfs.ext4 -b`.

---

